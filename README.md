# Taxi Management System

Система управления такси с использованием процессов, межпроцессного взаимодействия (IPC) и таймеров.

## Функциональность

Система состоит из двух основных компонентов:

### CLI (Command Line Interface)

- **Опорный пункт** - основное приложение управления
- **Команды:**
  - `create_driver` - создание нового процесса-водителя
  - `send_task <pid> <task_timer>` - назначение задачи водителю
  - `get_status <pid>` - получение статуса конкретного водителя
  - `get_drivers` - отображение статусов всех водителей
  - `exit` - завершение работы системы

### Driver Process

- **Процесс-водитель** - независимый процесс, выполняющий задачи
- **Состояния:**
  - `Available` - свободен, готов к выполнению задач
  - `Busy <timer>` - занят выполнением задачи, показывает оставшееся время

## Особенности реализации

### Структура проекта

```
taxi_system/
├── build/ 
├── include/
│   ├── cli.h
│   ├── driver.h
│   ├── common.h
│   └── driver_list.h
├── src/
│   ├── cli/
│   │   ├── main.c
│   │   ├── cli.c
│   │   └── driver_list.c
│   ├── driver/
│   │   ├── main.c
│   │   └── driver.c
│   └── common/
│       └── common.c
└── Makefile
```

### Архитектура

```
CLI (родительский процесс)
│
├── Driver Process 1 (дочерний процесс)
├── Driver Process 2
└── Driver Process N
```

### Межпроцессное взаимодействие (IPC)

- **Именованные каналы (FIFO)** для коммуникации между CLI и водителями
- Каждый водитель имеет уникальный FIFO: `/tmp/taxi_driver_<PID>`
- **Структура команды:**
```c
typedef struct {
    CommandType type;    // тип команды
    int task_timer;      // время выполнения задачи
} Command;
```

### Управление таймерами

- Неблокирующая обработка времени выполнения задач
- Использование poll() с таймаутом для периодической проверки
- Автоматическое обновление статуса по истечении времени задачи
- Точное вычисление оставшегося времени с помощью time()

### Особенности реализации таймеров

#### В CLI:

- Периодическая проверка истечения времени задач
- Автоматическое обновление статуса водителей
- Локальное хранение информации о таймерах

#### В Driver Process:

- Неблокирующее ожидание команд 
- Автономное отслеживание времени выполнения задачи
- Мгновенное обновление статуса при завершении задачи

### Многозадачность

- Параллельная работа множества водителей
- Неблокирующие операции ввода-вывода
- Эффективное использование ресурсов без активного ожидания

## Требования к системе

- Linux/UNIX-подобная операционная система
- Компилятор GCC
- Стандартные библиотеки C

## Сборка и запуск

``` bash
# Компиляция
make

# Переход в папку со сборками
cd build

# Запуск системы
./cli

# В CLI выполнить команды:
create_driver
send_task 12345 30  # Назначить задачу на 30 секунд
get_status 12345
get_drivers
exit
```

## Безопасность и надежность

- Обработка ошибок системных вызовов
- Защита от частичного чтения/записи в FIFO
- Корректное освобождение ресурсов при завершении
- Проверка существования FIFO перед созданием

## Ограничения

- Размер буфера команд: 1024 байт

Система демонстрирует эффективное использование процессов, IPC и таймеров в UNIX-подобных системах для построения распределенных приложений.
